// Test posted-outputs.log duplicate detection
const fs = require('fs');
const path = require('path');
const { isContentDuplicate } = require('../src/utils/contentDeduplication');

const logFile = path.join(process.cwd(), 'posted-outputs.log');
if (!fs.existsSync(logFile)) {
  console.error('posted-outputs.log not found');
  process.exit(1);
}

const testCases = [
  'Life was strange: color two weeks ago', // Should be duplicate
  'I have a big man!', // Should be duplicate
  'Something completely new', // Should NOT be duplicate
  'CENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENTCENT!', // Should be flagged as spam/duplicate
];

for (const test of testCases) {
  const result = isContentDuplicate(test);
  console.log(`Test: "${test.slice(0, 60)}..."\n  Duplicate?`, result);
}
